<div class="container mx-auto px-6 md:px-20 my-6">
    <div class="mb-4 flex items-center justify-between">
        <h1 class="mb-8 text-4xl text-left">Vehiculos</h1>
        <button [routerLink]="['/dashboard/vehicle-creation']"
            class="flex items-center p-1 sm:pl-3 rounded-lg mb-8 bg-indigo-700 text-white hover:bg-indigo-800">
            <span class="hidden sm:block text-xl mb-0 uppercase pr-1">Crear</span>

            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="w-8 h-8"
                viewBox="0 0 16 16">
                <path fill-rule="evenodd"
                    d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2Z" />
            </svg>
        </button>

    </div>
    <div class="md:flex md:gap-3">
        <div class="mb-4 md:w-5/6">
            <input type="text" [(ngModel)]="searchTerm" id="search-input" (keyup.enter)="search(searchTerm)"
                placeholder="Ingrese color, marca o modelo"
                class="w-full rounded-lg border-[1.5px] border-form-stroke py-3 px-5 font-medium text-body-color placeholder-body-color outline-none transition focus:border-indigo-700 active:border-indigo-700 disabled:cursor-default disabled:bg-[#F5F7FD]" />

        </div>
        <div class="mb-4 md:w-1/6">

            <button type="button" (click)="search(searchTerm)"
                class="w-full inline-flex items-center justify-center rounded-md border border-indigo-700 py-3 px-10 text-center text-base text-indigo-700 transition hover:border-indigo-700 hover:bg-indigo-700 hover:text-white lg:px-8 xl:px-10 disabled:bg-slate-400 disabled:border-slate-300 disabled:text-slate-100">Buscar</button>
        </div>
    </div>
    <!-- Sección de botones de filtros -->
    <div class="p-4 mb-4 flex flex-col items-center justify-center gap-3 border md:flex-row">


        <div class="relative inline-block text-left">
            <button (click)="toggle('order')"
                class=" flex items-center rounded bg-indigo-700 py-3 px-5 text-base font-semibold text-white">
                Ordenar por:
                <span class="pl-2">
                    <svg width="12" height="7" viewBox="0 0 12 7" class="fill-current">
                        <path
                            d="M0.564864 0.879232C0.564864 0.808624 0.600168 0.720364 0.653125 0.667408C0.776689 0.543843 0.970861 0.543844 1.09443 0.649756L5.82517 5.09807C5.91343 5.18633 6.07229 5.18633 6.17821 5.09807L10.9089 0.649756C11.0325 0.526192 11.2267 0.543844 11.3502 0.667408C11.4738 0.790972 11.4562 0.985145 11.3326 1.10871L6.60185 5.55702C6.26647 5.85711 5.73691 5.85711 5.41917 5.55702L0.670776 1.10871C0.600168 1.0381 0.564864 0.967492 0.564864 0.879232Z" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M1.4719 0.229332L6.00169 4.48868L10.5171 0.24288C10.9015 -0.133119 11.4504 -0.0312785 11.7497 0.267983C12.1344 0.652758 12.0332 1.2069 11.732 1.50812L11.7197 1.52041L6.97862 5.9781C6.43509 6.46442 5.57339 6.47872 5.03222 5.96853C5.03192 5.96825 5.03252 5.96881 5.03222 5.96853L0.271144 1.50833C0.123314 1.3605 -5.04223e-08 1.15353 -3.84322e-08 0.879226C-2.88721e-08 0.660517 0.0936127 0.428074 0.253705 0.267982C0.593641 -0.0719548 1.12269 -0.0699964 1.46204 0.220873L1.4719 0.229332ZM5.41917 5.55702C5.73691 5.85711 6.26647 5.85711 6.60185 5.55702L11.3326 1.10871C11.4562 0.985145 11.4738 0.790972 11.3502 0.667408C11.2267 0.543844 11.0325 0.526192 10.9089 0.649756L6.17821 5.09807C6.07229 5.18633 5.91343 5.18633 5.82517 5.09807L1.09443 0.649756C0.970861 0.543844 0.776689 0.543843 0.653125 0.667408C0.600168 0.720364 0.564864 0.808624 0.564864 0.879232C0.564864 0.967492 0.600168 1.0381 0.670776 1.10871L5.41917 5.55702Z" />
                    </svg>
                </span>
            </button>
            <div *ngIf="filtersDropdownState.order"
                class="absolute left-0 z-40 mt-2 w-full rounded border-[.5px] border-light bg-white py-5 shadow-card transition-all">
                <button (click)="orderBy('make')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Marca
                </button>
                <button (click)="orderBy('model')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Modelo
                </button>
                <button (click)="orderBy('color')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Color
                </button>
                <button (click)="orderBy('admissionDate')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Fecha Admisión
                </button>
            </div>
        </div>

        <div class="relative inline-block text-left">
            <button (click)="toggle('sort')"
                class=" flex items-center rounded bg-indigo-700 py-3 px-5 text-base font-semibold text-white">
                Orden:
                <span class="pl-2">
                    <svg width="12" height="7" viewBox="0 0 12 7" class="fill-current">
                        <path
                            d="M0.564864 0.879232C0.564864 0.808624 0.600168 0.720364 0.653125 0.667408C0.776689 0.543843 0.970861 0.543844 1.09443 0.649756L5.82517 5.09807C5.91343 5.18633 6.07229 5.18633 6.17821 5.09807L10.9089 0.649756C11.0325 0.526192 11.2267 0.543844 11.3502 0.667408C11.4738 0.790972 11.4562 0.985145 11.3326 1.10871L6.60185 5.55702C6.26647 5.85711 5.73691 5.85711 5.41917 5.55702L0.670776 1.10871C0.600168 1.0381 0.564864 0.967492 0.564864 0.879232Z" />
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M1.4719 0.229332L6.00169 4.48868L10.5171 0.24288C10.9015 -0.133119 11.4504 -0.0312785 11.7497 0.267983C12.1344 0.652758 12.0332 1.2069 11.732 1.50812L11.7197 1.52041L6.97862 5.9781C6.43509 6.46442 5.57339 6.47872 5.03222 5.96853C5.03192 5.96825 5.03252 5.96881 5.03222 5.96853L0.271144 1.50833C0.123314 1.3605 -5.04223e-08 1.15353 -3.84322e-08 0.879226C-2.88721e-08 0.660517 0.0936127 0.428074 0.253705 0.267982C0.593641 -0.0719548 1.12269 -0.0699964 1.46204 0.220873L1.4719 0.229332ZM5.41917 5.55702C5.73691 5.85711 6.26647 5.85711 6.60185 5.55702L11.3326 1.10871C11.4562 0.985145 11.4738 0.790972 11.3502 0.667408C11.2267 0.543844 11.0325 0.526192 10.9089 0.649756L6.17821 5.09807C6.07229 5.18633 5.91343 5.18633 5.82517 5.09807L1.09443 0.649756C0.970861 0.543844 0.776689 0.543843 0.653125 0.667408C0.600168 0.720364 0.564864 0.808624 0.564864 0.879232C0.564864 0.967492 0.600168 1.0381 0.670776 1.10871L5.41917 5.55702Z" />
                    </svg>
                </span>
            </button>
            <div *ngIf="filtersDropdownState.sort"
                class="absolute left-0 z-40 mt-2 w-full rounded border-[.5px] border-light bg-white py-5 shadow-card transition-all">
                <button (click)="sort('asc')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Asc.
                </button>
                <button (click)="sort('desc')"
                    class="block mx-auto py-2 px-5 text-base font-semibold text-body-color hover:bg-primary hover:bg-opacity-5 hover:text-primary">
                    Desc.
                </button>
            </div>
        </div>



        <div class="relative inline-block text-left">
            <button (click)="reset()"
                class="inline-flex items-center justify-center rounded-md border border-indigo-700 py-3 px-10 text-center text-base font-semibold text-indigo-700 transition hover:border-indigo-700 hover:bg-indigo-700 hover:text-white lg:px-8 xl:px-10">Borrar
                filtros</button>
        </div>

    </div>

    <div class="md:flex md:gap-3 md:justify-center">
        <app-filter-select [options]="colors" [listName]="'Color'"
            (selected)="filter('color', $event)"></app-filter-select>
        <app-filter-select class="md:basis-1/6" [options]="makes" [listName]="'Marca'"
            (selected)="filter('make', $event)"></app-filter-select>
        <app-filter-select [options]="models" [listName]="'Modelo'"
            (selected)="filter('model', $event)"></app-filter-select>
        <app-novelties-categories-select [options]="noveltiesCategories"
            (selected)="filter('noveltiesCategory', $event)"></app-novelties-categories-select>
    </div>

    <div class="p-4 mb-4">
        <ul class="grid grid-flow-row md:grid-flow-col text-center border-b border-gray-200 text-gray-500">
            <li> <button (click)="tabReset()"
                    [ngClass]="{'border-indigo-600': !searchParams.has('isActive') && !searchParams.has('isAssigned')}"
                    class="w-full text-center border-b-4 border-transparent hover:text-indigo-600 hover:border-indigo-600 py-4">Todos</button>
            </li>
            <li> <button (click)="filter('isActive','true')"
                    [ngClass]="{'border-indigo-600': searchParams.get('isActive')==='true'}"
                    class="w-full text-center border-b-4 border-transparent hover:text-indigo-600 hover:border-indigo-600 py-4">Activos</button>
            </li>
            <li> <button (click)="filter('isActive','false')"
                    [ngClass]="{'border-indigo-600': searchParams.get('isActive')==='false'}"
                    class="w-full text-center border-b-4 border-transparent hover:text-indigo-600 hover:border-indigo-600 py-4">Inactivos</button>
            </li>
            <li> <button (click)="filter('isAssigned','true')"
                    [ngClass]="{'border-indigo-600': searchParams.get('isAssigned')==='true'}"
                    class="w-full text-center border-b-4 border-transparent hover:text-indigo-600 hover:border-indigo-600 py-4">Asignados</button>
            </li>
            <li> <button (click)="filter('isAssigned','false')"
                    [ngClass]="{'border-indigo-600': searchParams.get('isAssigned')==='false'}"
                    class="w-full text-center border-b-4 border-transparent hover:text-indigo-600 hover:border-indigo-600 py-4">Sin
                    Asignar</button>
            </li>
        </ul>
    </div>
    <!-- Listado de Vehiculos -->
    <div class="flex flex-col gap-3">
        <div *ngIf="!currentVehicles" class="mx-auto mb-4">
            <app-spinner></app-spinner>
        </div>

        <div class="text-center mb-4 text-xl" *ngIf="currentVehicles && currentVehicles.length===0">No se encontraron
            vehículos o
            coincidencias
            para mostrar.
        </div>
        <div *ngFor="let vehicle of currentVehicles"
            class="border p-4 flex flex-col gap-1 justify-center items-center md:flex-row md:justify-around text-xl md:text-base">
            <div class="text-2xl font-semibold md:text-lg md:basis-2/6">{{vehicle.make.name}} {{vehicle.model}}</div>
            <div class="md:basis-1/6">Color: {{vehicle.color.name}}</div>
            <div class="md:basis-1/6">Estado: <span *ngIf="vehicle.isActive">Activo</span><span
                    *ngIf="!vehicle.isActive">Inactivo</span>
            </div>
            <div class="md:basis-1/6">Asignado: <span *ngIf="vehicle.isAssigned">Si</span><span
                    *ngIf="!vehicle.isAssigned">No</span></div>
            <div class="md:basis-1/6 md:text-right p-3"><a [routerLink]="['./vehicle-details', vehicle.id]"
                    class="py-3 px-5 bg-indigo-700 text-white font-medium rounded-md transition hover:bg-indigo-600">Detalles</a>
            </div>
        </div>

    </div>

    <!-- Botones de navegación -->
    <div *ngIf="currentVehicles && currentVehicles.length > 0">

        <div class="m-4 text-center">
            <p>Mostrando página {{currentPage}} de {{totalPages}}</p>
        </div>
        <div class="m-4 flex flex-row justify-center mx-auto">
            <button type="button" (click)="prevPage()" [disabled]="currentPage===1"
                class="bg-indigo-800 text-white rounded-l-md border-r border-gray-100 py-2 hover:bg-indigo-600 hover:text-white px-3 disabled:bg-slate-500">
                <div class="flex flex-row align-middle">
                    <svg class="w-5 mr-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M7.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l2.293 2.293a1 1 0 010 1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                    <p class="ml-2">Anterior</p>
                </div>
            </button>
            <button type="button" (click)="nextPage()" [disabled]="currentPage===totalPages"
                class="bg-indigo-800 text-white rounded-r-md py-2 border-l border-gray-200 hover:bg-indigo-600 hover:text-white px-3 disabled:bg-slate-500">
                <div class="flex flex-row align-middle">
                    <span class="mr-2">Siguiente</span>
                    <svg class="w-5 ml-2" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd"
                            d="M12.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-2.293-2.293a1 1 0 010-1.414z"
                            clip-rule="evenodd"></path>
                    </svg>
                </div>
            </button>
        </div>
    </div>
</div>